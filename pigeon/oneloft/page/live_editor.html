<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>申请直播</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/m_style.css">
    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/public.js"></script>
    <style>
        .input_info_tit span:nth-child(2) {
            text-align: left;
        }
        
        .input_info_tit textarea {
            width: 40%;
            min-height: 100px;
            padding: 10px;
        }
    </style>
</head>

<body>
    <div>
        <div class="commod_tit" id="order_tit">
        </div>
        <div class="commodity_box product_info">
            <h5>申请直播</h5>
            <div class="input_info_tit clearfix">
                <span>标题</span>
                <input type="text" placeholder="" id="live_title">
            </div>
            <div class="input_info_tit clearfix">
                <span>直播内容</span>
                <textarea></textarea>
            </div>
            <div class="input_info_tit clearfix">
                <!-- <span id="">直播时长</span> -->
                <span id="">服务类型</span>
                <!-- <input type="text" placeholder="" id="pigeonName"> -->
                <span> 免费服务（限时2000分钟）</span>
            </div>
            <div class="editor_button">
                <button id="return_btn">返回</button>
                <button id="save_btn">提交</button>
            </div>
        </div>
    </div>
    <script>
        //页面初始化， 所有数据从上一页带过来
        /**
         * 23、直播详情接口
         * http://域名/oneloft/live/find
         */
        var initData = {};
        initPage(initData, function() {

        });

        function initPage(initData, callback) {
            $.ajax({
                url: location.origin + "/oneloft/live/find",
                type: "post",
                data: JSON.stringify(initData),
                dataType: "json",
                contentType: "application/json",
                success: function(data) {
                    alert(JSON.stringify(data));
                    errorToken(data.code);
                    if (data.code == "0") {
                        callback && callback();
                    }
                },
                error: function() {
                    myAlert.createBox("网络不给力");
                }
            });
        }
        /**
         * 22、直播申请接口
         * http://域名/oneloft/live/add
         */
        function audit(auditData, callback) {
            $.ajax({
                url: location.origin + "/oneloft/live/add",
                type: "post",
                data: JSON.stringify(auditData),
                dataType: "json",
                contentType: "application/json",
                success: function(data) {
                    errorToken(data.code);
                    if (data.code == "0") {
                        myAlert.createBox("发送成功");
                        callback && callback();
                    }
                },
                error: function() {
                    myAlert.createBox("网络不给力");
                }
            });
        }
        /**
         * 返回
         */
        $("#return_btn").on("click", function() {
            window.history.go(-1);
        });
        /**
         * 提交
         */
        $("#save_btn").on("click", function() {
            if (!$("#live_title").val()) {
                myAlert.createBox("请输入直播标题");
                return;
            }
            if (!$("textarea").val()) {
                myAlert.createBox("请输入直播内容");
                return;
            }
            var auditData = {
                "application": $("textarea").val()
            }
            audit(auditData, function() {
                window.history.go(-1);
            });
        });
    </script>
</body>

</html>"